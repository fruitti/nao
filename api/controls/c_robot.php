<?phpswitch($_SERVER['REQUEST_METHOD']) {    case 'OPTIONS':        echo json_encode(true);        break;    case 'POST':        $result = verify_token_valid();        if (is_null($result)) {            //convert JSON POST into array            $input = json_decode(file_get_contents('php://input'), TRUE);            // c'est un post on rajoute une entité !            $id = $DB->createRobot($input);            if($id) {                echo json_encode([                    'message' => $id                ]);            } else {                echo json_encode([                    'error' => $DB->error()[2]                ]);            }        } else {            echo json_encode([                'error' => 'Erreur : '.$result            ]);        }        break;    case 'GET':        echo json_encode($DB->readRobot(isset($_GET['id']) && !is_null($_GET['id']) ? $_GET['id'] : null));        break;    case 'PUT':        $result = verify_token_valid();        if (is_null($result)) {            if (isset($_GET['id']) && !is_null($_GET['id'])) {                //convert JSON POST into array                $input = json_decode(file_get_contents('php://input'), TRUE);                $result = $DB->updateRobot($_GET['id'], $input);                if ($result) {                    echo json_encode([                        'message' => 'OK'                    ]);                } else {                    echo json_encode([                        'error' => 'KO'                    ]);                }            } else {                echo json_encode([                    'error' => 'ID manquant'                ]);            }        } else {            echo json_encode([                'error' => 'Erreur : '.$result            ]);        }        break;    case 'DELETE':        $result = verify_token_valid();        if (is_null($result)) {            if (isset($_GET['id']) && !is_null($_GET['id'])) {                echo json_encode($DB->deleteRobot($_GET['id']));            }        } else {            echo json_encode([                'error' => 'Erreur : '.$result            ]);        }        break;    default:        echo json_encode([            'error' => 'Methode ' .$_SERVER['REQUEST_METHOD'].' non supporté'        ]);        break;}